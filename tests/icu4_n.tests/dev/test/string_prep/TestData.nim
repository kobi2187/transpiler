# "Namespace: ICU4N.Dev.Test.StringPrep"
type
  TestData = ref object
    unicodeIn: seq[char] = @[@[cast[char](1604), cast[char](1610), cast[char](1607), cast[char](1605), cast[char](1575), cast[char](1576), cast[char](1578), cast[char](1603), cast[char](1604), cast[char](1605), cast[char](1608), cast[char](1588), cast[char](1593), cast[char](1585), cast[char](1576), cast[char](1610), cast[char](1567)], @[cast[char](20182), cast[char](20204), cast[char](20026), cast[char](20160), cast[char](20040), cast[char](19981), cast[char](35828), cast[char](20013), cast[char](25991)], @[cast[char](80), cast[char](114), cast[char](111), cast[char](269), cast[char](112), cast[char](114), cast[char](111), cast[char](115), cast[char](116), cast[char](283), cast[char](110), cast[char](101), cast[char](109), cast[char](108), cast[char](117), cast[char](118), cast[char](237), cast[char](269), cast[char](101), cast[char](115), cast[char](107), cast[char](121)], @[cast[char](1500), cast[char](1502), cast[char](1492), cast[char](1492), cast[char](1501), cast[char](1508), cast[char](1513), cast[char](1493), cast[char](1496), cast[char](1500), cast[char](1488), cast[char](1502), cast[char](1491), cast[char](1489), cast[char](1512), cast[char](1497), cast[char](1501), cast[char](1506), cast[char](1489), cast[char](1512), cast[char](1497), cast[char](1514)], @[cast[char](2351), cast[char](2361), cast[char](2354), cast[char](2379), cast[char](2327), cast[char](2361), cast[char](2367), cast[char](2344), cast[char](2381), cast[char](2342), cast[char](2368), cast[char](2325), cast[char](2381), cast[char](2351), cast[char](2379), cast[char](2306), cast[char](2344), cast[char](2361), cast[char](2368), cast[char](2306), cast[char](2348), cast[char](2379), cast[char](2354), cast[char](2360), cast[char](2325), cast[char](2340), cast[char](2375), cast[char](2361), cast[char](2376), cast[char](2306)], @[cast[char](12394), cast[char](12380), cast[char](12415), cast[char](12435), cast[char](12394), cast[char](26085), cast[char](26412), cast[char](35486), cast[char](12434), cast[char](35441), cast[char](12375), cast[char](12390), cast[char](12367), cast[char](12428), cast[char](12394), cast[char](12356), cast[char](12398), cast[char](12363)], @[cast[char](1087), cast[char](1086), cast[char](1095), cast[char](1077), cast[char](1084), cast[char](1091), cast[char](1078), cast[char](1077), cast[char](1086), cast[char](1085), cast[char](1080), cast[char](1085), cast[char](1077), cast[char](1075), cast[char](1086), cast[char](1074), cast[char](1086), cast[char](1088), cast[char](1103), cast[char](1090), cast[char](1087), cast[char](1086), cast[char](1088), cast[char](1091), cast[char](1089), cast[char](1089), cast[char](1082), cast[char](1080)], @[cast[char](80), cast[char](111), cast[char](114), cast[char](113), cast[char](117), cast[char](233), cast[char](110), cast[char](111), cast[char](112), cast[char](117), cast[char](101), cast[char](100), cast[char](101), cast[char](110), cast[char](115), cast[char](105), cast[char](109), cast[char](112), cast[char](108), cast[char](101), cast[char](109), cast[char](101), cast[char](110), cast[char](116), cast[char](101), cast[char](104), cast[char](97), cast[char](98), cast[char](108), cast[char](97), cast[char](114), cast[char](101), cast[char](110), cast[char](69), cast[char](115), cast[char](112), cast[char](97), cast[char](241), cast[char](111), cast[char](108)], @[cast[char](20182), cast[char](20497), cast[char](29234), cast[char](20160), cast[char](40637), cast[char](19981), cast[char](35498), cast[char](20013), cast[char](25991)], @[cast[char](84), cast[char](7841), cast[char](105), cast[char](115), cast[char](97), cast[char](111), cast[char](104), cast[char](7885), cast[char](107), cast[char](104), cast[char](244), cast[char](110), cast[char](103), cast[char](116), cast[char](104), cast[char](7875), cast[char](99), cast[char](104), cast[char](7881), cast[char](110), cast[char](243), cast[char](105), cast[char](116), cast[char](105), cast[char](7871), cast[char](110), cast[char](103), cast[char](86), cast[char](105), cast[char](7879), cast[char](116)], @[cast[char](51), cast[char](24180), cast[char](66), cast[char](32068), cast[char](37329), cast[char](20843), cast[char](20808), cast[char](29983)], @[cast[char](23433), cast[char](23460), cast[char](22856), cast[char](32654), cast[char](24693), cast[char](45), cast[char](119), cast[char](105), cast[char](116), cast[char](104), cast[char](45), cast[char](83), cast[char](85), cast[char](80), cast[char](69), cast[char](82), cast[char](45), cast[char](77), cast[char](79), cast[char](78), cast[char](75), cast[char](69), cast[char](89), cast[char](83)], @[cast[char](72), cast[char](101), cast[char](108), cast[char](108), cast[char](111), cast[char](45), cast[char](65), cast[char](110), cast[char](111), cast[char](116), cast[char](104), cast[char](101), cast[char](114), cast[char](45), cast[char](87), cast[char](97), cast[char](121), cast[char](45), cast[char](12381), cast[char](12428), cast[char](12382), cast[char](12428), cast[char](12398), cast[char](22580), cast[char](25152)], @[cast[char](12402), cast[char](12392), cast[char](12388), cast[char](23627), cast[char](26681), cast[char](12398), cast[char](19979), cast[char](50)], @[cast[char](77), cast[char](97), cast[char](106), cast[char](105), cast[char](12391), cast[char](75), cast[char](111), cast[char](105), cast[char](12377), cast[char](12427), cast[char](53), cast[char](31186), cast[char](21069)], @[cast[char](12497), cast[char](12501), cast[char](12451), cast[char](12540), cast[char](100), cast[char](101), cast[char](12523), cast[char](12531), cast[char](12496)], @[cast[char](12381), cast[char](12398), cast[char](12473), cast[char](12500), cast[char](12540), cast[char](12489), cast[char](12391)], @[cast[char](55296), cast[char](57088), cast[char](55296), cast[char](57089), cast[char](55296), cast[char](57090), cast[char](55296), cast[char](57091), cast[char](55296), cast[char](57093), cast[char](55296), cast[char](57094), cast[char](55296), cast[char](57095), cast[char](55296), cast[char](57097), cast[char](55296), cast[char](57098), cast[char](55296), cast[char](57099)], @[cast[char](55296), cast[char](57101), cast[char](55296), cast[char](57100), cast[char](55296), cast[char](57118), cast[char](55296), cast[char](57103), cast[char](55296), cast[char](57110), cast[char](55296), cast[char](57109), cast[char](55296), cast[char](57108), cast[char](55296), cast[char](57106), cast[char](55296), cast[char](57104), cast[char](55296), cast[char](57120), cast[char](55296), cast[char](57121)], @[cast[char](949), cast[char](955), cast[char](955), cast[char](951), cast[char](957), cast[char](953), cast[char](954), cast[char](940)], @[cast[char](98), cast[char](111), cast[char](110), cast[char](289), cast[char](117), cast[char](115), cast[char](97), cast[char](295), cast[char](295), cast[char](97)], @[cast[char](1087), cast[char](1086), cast[char](1095), cast[char](1077), cast[char](1084), cast[char](1091), cast[char](1078), cast[char](1077), cast[char](1086), cast[char](1085), cast[char](1080), cast[char](1085), cast[char](1077), cast[char](1075), cast[char](1086), cast[char](1074), cast[char](1086), cast[char](1088), cast[char](1103), cast[char](1090), cast[char](1087), cast[char](1086), cast[char](1088), cast[char](1091), cast[char](1089), cast[char](1089), cast[char](1082), cast[char](1080)]]
    asciiIn: seq[String] = @["xn--egbpdaj6bu4bxfgehfvwxn", "xn--ihqwcrb4cv8a8dqg056pqjye", "xn--Proprostnemluvesky-uyb24dma41a", "xn--4dbcagdahymbxekheh6e0a7fei0b", "xn--i1baa7eci9glrd9b2ae1bj0hfcgg6iyaf8o0a1dig0cd", "xn--n8jok5ay5dzabd5bym9f0cm5685rrjetr6pdxa", "xn--b1abfaaepdrnnbgefbaDotcwatmq2g4l", "xn--PorqunopuedensimplementehablarenEspaol-fmd56a", "xn--ihqwctvzc91f659drss3x8bo0yb", "xn--TisaohkhngthchnitingVit-kjcr8268qyxafd2f1b9g", "xn--3B-ww4c5e180e575a65lsy2b", "xn---with-SUPER-MONKEYS-pc58ag80a8qai00g7n9n", "xn--Hello-Another-Way--fc4qua05auwb3674vfr0b", "xn--2-u9tlzr9756bt3uc0v", "xn--MajiKoi5-783gue6qz075azm5e", "xn--de-jg4avhby1noc0d", "xn--d9juau41awczczp", "XN--097CCDEKGHQJK", "XN--db8CBHEJLGH4E0AL", "xn--hxargifdar", "xn--bonusaa-5bb1da", "xn--b1abfaaepdrnnbgefbadotcwatmq2g4l"]
    domainNames: seq[String] = @["slip129-37-118-146.nc.us.ibm.net", "saratoga.pe.utexas.edu", "dial-120-45.ots.utexas.edu", "woo-085.dorms.waller.net", "hd30-049.hil.compuserve.com", "pem203-31.pe.ttu.edu", "56K-227.MaxTNT3.pdq.net", "dial-36-2.ots.utexas.edu", "slip129-37-23-152.ga.us.ibm.net", "ts45ip119.cadvision.com", "sdn-ts-004txaustP05.dialsprint.net", "bar-tnt1s66.erols.com", "101.st-louis-15.mo.dial-access.att.net", "h92-245.Arco.COM", "dial-13-2.ots.utexas.edu", "net-redynet29.datamarkets.com.ar", "ccs-shiva28.reacciun.net.ve", "7.houston-11.tx.dial-access.att.net", "ingw129-37-120-26.mo.us.ibm.net", "dialup6.austintx.com", "dns2.tpao.gov.tr", "slip129-37-119-194.nc.us.ibm.net", "cs7.dillons.co.uk.203.119.193.in-addr.arpa", "swprd1.innovplace.saskatoon.sk.ca", "bikini.bologna.maraut.it", "node91.subnet159-198-79.baxter.com", "cust19.max5.new-york.ny.ms.uu.net", "balexander.slip.andrew.cmu.edu", "pool029.max2.denver.co.dynip.alter.net", "cust49.max9.new-york.ny.ms.uu.net", "s61.abq-dialin2.hollyberry.com"]
    domainNames1Uni: seq[String] = @["गनेश.sanjose.ibm.com", "www.ġ.com", "www.Â¤.com", "www.Â£.com", "Ã¼.com"]
    domainNamesToASCIIOut: seq[String] = @["xn--31b8a2bwd.sanjose.ibm.com", "www.xn--vea.com", "www.xn--bba7j.com", "www.xn--9a9j.com", "xn--14-ria7423a.com"]
    domainNamesToUnicodeOut: seq[String] = @["गनेश.sanjose.ibm.com", "www.ġ.com", "www.â¤.com", "www.â£.com", "ã1⁄4.com"]
    errorCases: seq[ErrorCase] = @[ErrorCase(@[cast[char](119), cast[char](119), cast[char](119), cast[char](46), cast[char](49464), cast[char](44228), cast[char](51032), cast[char](47784), cast[char](46304), cast[char](49324), cast[char](46988), cast[char](46308), cast[char](51060), cast[char](1807), cast[char](54620), cast[char](44397), cast[char](50612), cast[char](47484), cast[char](51060), cast[char](54644), cast[char](54620), cast[char](45796), cast[char](47732), cast[char](46), cast[char](99), cast[char](111), cast[char](109)], "www.xn--8mb5595fsoa28orucya378bqre2tcwop06c5qbw82a1rffmae0361dea96b.com", StringPrepFormatException("", StringPrepErrorType.ProhibitedError), false, true, true), ErrorCase(@[cast[char](119), cast[char](119), cast[char](119), cast[char](46), cast[char](49464), cast[char](44228), cast[char](51032), cast[char](47784), cast[char](46304), cast[char](49324), cast[char](46988), cast[char](46308), cast[char](51060), cast[char](545), cast[char](564), cast[char](46), cast[char](99), cast[char](111), cast[char](109)], "www.xn--6la2bz548fj1gua391bf1gb1n59ab29a7ia.com", StringPrepFormatException("", StringPrepErrorType.UnassignedError), false, true, true), ErrorCase(@[cast[char](119), cast[char](119), cast[char](119), cast[char](46), cast[char](49464), cast[char](44228), cast[char](51032), cast[char](47784), cast[char](46304), cast[char](49324), cast[char](46988), cast[char](46308), cast[char](51060), cast[char](1604), cast[char](1610), cast[char](1607), cast[char](54620), cast[char](44397), cast[char](50612), cast[char](47484), cast[char](51060), cast[char](54644), cast[char](54620), cast[char](45796), cast[char](47732), cast[char](46), cast[char](99), cast[char](111), cast[char](109)], "www.xn--ghBGI4851OiyA33VqrD6Az86C4qF83CtRv93D5xBk15AzfG0nAgA0578DeA71C.com", StringPrepFormatException("", StringPrepErrorType.CheckBiDiError), false, true, true), ErrorCase(@[cast[char](119), cast[char](119), cast[char](119), cast[char](46), cast[char](45), cast[char](44228), cast[char](51032), cast[char](47784), cast[char](46304), cast[char](49324), cast[char](46988), cast[char](46308), cast[char](51060), cast[char](46), cast[char](54620), cast[char](44397), cast[char](50612), cast[char](47484), cast[char](51060), cast[char](54644), cast[char](54620), cast[char](45796), cast[char](47732), cast[char](46), cast[char](99), cast[char](111), cast[char](109)], "www.xn----b95Ew8SqA315Ao5FbuMlnNmhA.com", StringPrepFormatException("", StringPrepErrorType.STD3ASCIIRulesError), true, true, false), ErrorCase(@[cast[char](119), cast[char](119), cast[char](119), cast[char](46), cast[char](120), cast[char](110), cast[char](45), cast[char](45), cast[char](45), cast[char](44228), cast[char](51032), cast[char](47784), cast[char](46304), cast[char](49324), cast[char](46988), cast[char](46308), cast[char](51060), cast[char](45), cast[char](54620), cast[char](44397), cast[char](50612), cast[char](47484), cast[char](51060), cast[char](54644), cast[char](54620), cast[char](45796), cast[char](47732), cast[char](46), cast[char](99), cast[char](111), cast[char](109)], "www.XY-----b91I0V65S96C2A355Cw1E5yCeQr19CsnP1mFfmAE0361DeA96B.com", StringPrepFormatException("", StringPrepErrorType.AcePrefixError), false, false, false), ErrorCase(@[cast[char](119), cast[char](119), cast[char](119), cast[char](46), cast[char](49464), cast[char](44228), cast[char](51032), cast[char](47784), cast[char](46304), cast[char](49324), cast[char](46988), cast[char](46308), cast[char](51060), cast[char](54620), cast[char](44397), cast[char](50612), cast[char](47484), cast[char](51060), cast[char](54644), cast[char](54620), cast[char](45796), cast[char](47732), cast[char](50620), cast[char](47560), cast[char](45208), cast[char](51339), cast[char](51012), cast[char](44620), cast[char](46), cast[char](99), cast[char](111), cast[char](109)], "www.xn--989AoMsVi5E83Db1D2A355Cv1E0vAk1DwRv93D5xBh15A0Dt30A5JpSD879Ccm6FeA98C.com", StringPrepFormatException("", StringPrepErrorType.LabelTooLongError), false, true, true), ErrorCase(@[cast[char](119), cast[char](119), cast[char](119), cast[char](46), cast[char](48), cast[char](1604), cast[char](1610), cast[char](1607), cast[char](49), cast[char](46), cast[char](99), cast[char](111), cast[char](109)], "www.xn--01-tvdmo.com", StringPrepFormatException("", StringPrepErrorType.CheckBiDiError), false, true, true), ErrorCase(@[cast[char](119), cast[char](119), cast[char](119), cast[char](46), cast[char](8300), cast[char](1604), cast[char](1610), cast[char](1607), cast[char](8301), cast[char](46), cast[char](99), cast[char](111), cast[char](109)], "www.XN--ghbgi278xia.com", StringPrepFormatException("", StringPrepErrorType.ProhibitedError), false, true, true), ErrorCase(@[cast[char](119), cast[char](119), cast[char](119), cast[char](46), cast[char](45), cast[char](65), cast[char](66), cast[char](67), cast[char](68), cast[char](69), cast[char](46), cast[char](99), cast[char](111), cast[char](109)], "www.-abcde.com", StringPrepFormatException("", StringPrepErrorType.STD3ASCIIRulesError), true, false, false), ErrorCase(@[cast[char](119), cast[char](119), cast[char](119), cast[char](46), cast[char](65), cast[char](66), cast[char](67), cast[char](68), cast[char](69), cast[char](45), cast[char](46), cast[char](99), cast[char](111), cast[char](109)], "www.abcde-.com", StringPrepFormatException("", StringPrepErrorType.STD3ASCIIRulesError), true, false, false), ErrorCase(@[cast[char](119), cast[char](119), cast[char](119), cast[char](46), cast[char](65), cast[char](66), cast[char](67), cast[char](68), cast[char](69), cast[char](64), cast[char](46), cast[char](99), cast[char](111), cast[char](109)], "www.abcde@.com", StringPrepFormatException("", StringPrepErrorType.STD3ASCIIRulesError), true, false, false), ErrorCase(@[cast[char](119), cast[char](119), cast[char](119), cast[char](46), cast[char](46), cast[char](99), cast[char](111), cast[char](109)], "www..com", StringPrepFormatException("", StringPrepErrorType.ZeroLengthLabel), true, true, false)]
    conformanceTestCases: seq[ConformanceTestCase] = @[ConformanceTestCase("Case folding ASCII U+0043 U+0041 U+0046 U+0045", "CAFE", "cafe", "Nameprep", UTS46Options.Default, nil), ConformanceTestCase("Case folding 8bit U+00DF (german sharp s)", "Ã", "ss", "Nameprep", UTS46Options.Default, nil), ConformanceTestCase("Non-ASCII multibyte space character U+1680", "á", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Non-ASCII 8bit control character U+0085", "Â", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Non-ASCII multibyte control character U+180E", "á ", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Non-ASCII control character U+1D175", "ðµ", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Plane 0 private use character U+F123", "ï£", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Plane 15 private use character U+F1234", "ó±´", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Plane 16 private use character U+10F234", "ô´", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Non-character code point U+8FFFE", "ò¿¾", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Non-character code point U+10FFFF", "ô¿¿", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Non-plain text character U+FFFD", "ï¿½", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Ideographic description character U+2FF5", "â¿µ", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Display property character U+0341", "Í", "Ì", "Nameprep", UTS46Options.Default, nil), ConformanceTestCase("Left-to-right mark U+200E", "â", "Ì", "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Deprecated U+202A", "âª", "Ì", "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Language tagging character U+E0001", "ó ", "Ì", "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Language tagging character U+E0042", "ó ", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.ProhibitedError)), ConformanceTestCase("Bidi: RandALCat character U+05BE and LCat characters", "fooÖ¾bar", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.CheckBiDiError)), ConformanceTestCase("Bidi: RandALCat character U+FD50 and LCat characters", "fooïµbar", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.CheckBiDiError)), ConformanceTestCase("Bidi: RandALCat character U+FB38 and LCat characters", "fooï¹¶bar", "foo Ùbar", "Nameprep", UTS46Options.Default, nil), ConformanceTestCase("Bidi: RandALCat without trailing RandALCat U+0627 U+0031", "Ø§1", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.CheckBiDiError)), ConformanceTestCase("Bidi: RandALCat character U+0627 U+0031 U+0628", "Ø§1Ø¨", "Ø§1Ø¨", "Nameprep", UTS46Options.Default, nil), ConformanceTestCase("Unassigned code point U+E0002", "ó ", nil, "Nameprep", UTS46Options.Default, StringPrepFormatException("", StringPrepErrorType.UnassignedError))]

type
  ErrorCase = ref object
    unicode: seq[char]
    ascii: String
    expected: Exception
    useSTD3ASCIIRules: bool
    testToUnicode: bool
    testLabel: bool

proc newErrorCase(uniIn: seq[char], asciiIn: String, ex: Exception, std3: bool, testToUni: bool, testlabel: bool): ErrorCase =
  unicode = uniIn
  ascii = asciiIn
  expected = ex
  useSTD3ASCIIRules = std3
  testToUnicode = testToUni
  testLabel = testlabel
type
  ConformanceTestCase = ref object
    comment: String
    input: String
    output: String
    profile: String
    flags: UTS46Options
    expected: Exception

proc GetBytes(@in: String): byte[] =
    if @in == nil:
        return nil
    var bytes: byte[] = seq[byte]
      var i: int = 0
      while i < @in.Length:
          bytes[i] = cast[byte](@in[i])
++i
    return bytes
proc newConformanceTestCase(comt: String, @in: String, @out: String, prof: String, flg: UTS46Options, ex: Exception): ConformanceTestCase =
  try:
      comment = comt
      var bytes: byte[] = GetBytes(@in)
      input = Encoding.UTF8.GetString(bytes)
      bytes = GetBytes(@out)
      output =       if bytes == nil:
nil
      else:
Encoding.UTF8.GetString(bytes)
      profile = prof
      flags = flg
      expected = ex
  except Exception:
e.PrintStackTrace
      raise Exception